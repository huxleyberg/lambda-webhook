openapi: "3.0.1"
info:
   title: "users-api"
   description: "Users API"
   version: "1.0"

paths:

    /users:
        post:
            consumes:
            - "application/json"
            produces:
            - "application/json"
            responses:
                "200":
                    description: "200 response"
            x-amazon-apigateway-integration:
                httpMethod: "POST"
                credentials:
                    Fn::Sub: ${LambdaExecutionRole.Arn}
                uri: 
                  Fn::Sub: "arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${UserFunction.Arn}/invocations"
                responses:
                    default:
                        statusCode: "200"
                passthroughBehavior: "when_no_match"
                type: "aws"
        get:
            consumes:
            - "application/json"
            produces:
            - "application/json"
            responses:
                "200":
                    description: "200 response"
            x-amazon-apigateway-integration:
                httpMethod: "POST"
                credentials:
                    Fn::GetAtt: [LambdaExecutionRole, Arn]
                uri: 
                  Fn::Sub: "arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${UserFunction.Arn}/invocations"
                responses:
                    default:
                        statusCode: "200"
                passthroughBehavior: "when_no_match"
                type: "aws"
